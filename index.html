<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>El Oráculo de Adriano</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, addDoc, onSnapshot, collection, query, serverTimestamp, setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        
        // Global variables provided by the Canvas environment (se asumen valores o se definen por defecto)
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        setLogLevel('debug');
        
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);
        
        let userId = null;
        let reviewsData = [];

        // Message box UI
        const showMessage = (text, isError = false) => {
            const msgBox = document.getElementById('message-box');
            if(msgBox){
              msgBox.textContent = text;
              msgBox.classList.remove('hidden');
              msgBox.classList.remove('bg-red-500', 'bg-green-500');
              msgBox.classList.add(isError ? 'bg-red-500' : 'bg-green-500');
              setTimeout(() => {
                  msgBox.classList.add('hidden');
              }, 3000);
            }
        };

        const renderReviews = (filterId = '') => {
            const reviewsContainer = document.getElementById('reviews-container');
            const filteredReviews = filterId
                ? reviewsData.filter(review => review.userId.toLowerCase().includes(filterId.toLowerCase()))
                : reviewsData;

            if (reviewsContainer) {
                if (filteredReviews.length === 0) {
                    reviewsContainer.innerHTML = `<p class="text-center text-white/70">
                        ${filterId ? 'No se encontraron reseñas con ese ID.' : 'Aún no hay reseñas. ¡Sé el primero en compartir tu experiencia!'}
                    </p>`;
                } else {
                    let reviewsHtml = '';
                    filteredReviews.forEach(review => {
                        const stars = '<i class="fas fa-star text-yellow-400"></i>'.repeat(review.rating) +
                                      '<i class="far fa-star text-gray-400"></i>'.repeat(5 - review.rating);
                        
                        const date = review.createdAt ? new Date(review.createdAt.toMillis()).toLocaleDateString() : 'Fecha desconocida';
                        
                        reviewsHtml += `
                            <div class="bg-purple-900 p-6 rounded-lg shadow-md animate-fade-in-up">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="text-white font-semibold flex items-center gap-2">
                                        <i class="fas fa-user-circle text-2xl text-purple-400"></i>
                                        Cliente
                                    </div>
                                    <div class="text-xs text-white/50">${date}</div>
                                </div>
                                <div class="flex justify-center text-yellow-400 mb-4 text-xl">
                                    ${stars}
                                </div>
                                <p class="text-lg italic text-white mb-4">"${review.comment}"</p>
                                <p class="text-sm text-purple-400 font-semibold text-right">ID de usuario: ${review.userId}</p>
                            </div>
                        `;
                    });
                    reviewsContainer.innerHTML = reviewsHtml;
                }
            }
        };

        // Handle user authentication
        onAuthStateChanged(auth, async (user) => {
            const loadingMessage = document.getElementById('loading-message');
            const reviewFormContainer = document.getElementById('review-form-container');
            const reviewsContainer = document.getElementById('reviews-container');

            if (user) {
                userId = user.uid;
                const userIdDisplay = document.getElementById('user-id-display');
                if(userIdDisplay) {
                    userIdDisplay.innerHTML = `Tu ID de usuario: <span class="text-white font-bold">${userId}</span>`;
                }

                if(loadingMessage) loadingMessage.classList.add('hidden');
                if(reviewFormContainer) reviewFormContainer.classList.remove('hidden');
                
                // Listen for real-time reviews from Firestore after user is authenticated
                if(reviewsContainer) {
                    const q = query(collection(db, `artifacts/${appId}/public/data/reviews`));
                    
                    onSnapshot(q, (snapshot) => {
                        reviewsData = [];
                        if (snapshot.empty) {
                            reviewsContainer.innerHTML = '<p class="text-center text-white/70">Aún no hay reseñas. ¡Sé el primero en compartir tu experiencia!</p>';
                        } else {
                            snapshot.forEach((doc) => {
                                reviewsData.push({ id: doc.id, ...doc.data() });
                            });
                            // Sort reviews by creation time, latest first
                            reviewsData.sort((a, b) => (b.createdAt?.toMillis() || 0) - (a.createdAt?.toMillis() || 0));
                            renderReviews();
                        }
                    }, (error) => {
                        console.error("Error al escuchar los comentarios:", error);
                        if(reviewsContainer) {
                            reviewsContainer.innerHTML = '<p class="text-center text-red-400">No se pudieron cargar los comentarios.</p>';
                        }
                    });
                }
            } else {
                try {
                    if (initialAuthToken) {
                        await signInWithCustomToken(auth, initialAuthToken);
                    } else {
                        await signInAnonymously(auth);
                    }
                } catch (error) {
                    console.error("Error during authentication:", error);
                    showMessage("Error de autenticación. Intenta recargar la página.", true);
                    if(loadingMessage) {
                      loadingMessage.textContent = 'Error al cargar. Por favor, recarga la página.';
                    }
                }
            }
        });

        // Handle review form submission
        const form = document.getElementById('review-form');
        if(form){
          form.addEventListener('submit', async (e) => {
              e.preventDefault();
              const commentInput = document.getElementById('comment-input');
              const comment = commentInput ? commentInput.value : '';
              const rating = document.querySelector('input[name="rating"]:checked');

              if (!comment || !rating) {
                  showMessage('Por favor, escribe un comentario y selecciona una calificación.');
                  return;
              }

              try {
                  await addDoc(collection(db, `artifacts/${appId}/public/data/reviews`), {
                      userId: userId,
                      comment: comment,
                      rating: parseInt(rating.value),
                      createdAt: serverTimestamp()
                  });

                  showMessage('¡Gracias! Tu reseña ha sido enviada.');
                  form.reset();
              } catch (error) {
                  console.error("Error al guardar el comentario:", error);
                  showMessage('Ocurrió un error al enviar tu reseña.', true);
              }
          });
        }

        // Add event listener for review search
        const reviewSearchInput = document.getElementById('review-search-input');
        if (reviewSearchInput) {
            reviewSearchInput.addEventListener('input', (e) => {
                renderReviews(e.target.value);
            });
        }

        const clearSearchBtn = document.getElementById('clear-search-btn');
        if (clearSearchBtn) {
            clearSearchBtn.addEventListener('click', () => {
                if (reviewSearchInput) {
                    reviewSearchInput.value = '';
                    renderReviews();
                }
            });
        }
        
    </script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Montserrat:wght@300;400;700&display=swap');
        body {
            font-family: 'Montserrat', sans-serif;
        }
        .playfair {
            font-family: 'Playfair Display', serif;
        }
        .text-glow {
            text-shadow: 0 0 10px #D8B4FE, 0 0 20px #D8B4FE, 0 0 30px #D8B4FE;
        }
        .animate-fade-in-up {
            animation: fadeInUp 1s ease-in-out;
            opacity: 0;
            animation-fill-mode: forwards;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .icon-svg {
            width: 3rem;
            height: 3rem;
            fill: #D8B4FE;
            transition: fill 0.3s ease-in-out, transform 0.3s ease-in-out;
        }
        .group:hover .icon-svg {
            fill: #FBCFEA;
            transform: scale(1.1);
        }
        .rating input {
            display: none;
        }
        .rating label {
            cursor: pointer;
            width: 2rem;
            height: 2rem;
            font-size: 2rem;
            color: #4B5563; /* Gray */
            transition: color 0.2s;
        }
        .rating input:checked ~ label {
            color: #FBBF24; /* Yellow */
        }
        .rating input:checked ~ label,
        .rating label:hover,
        .rating label:hover ~ label {
            color: #FBBF24;
        }
        .hero-background {
            background-image: url('https://upload.wikimedia.org/wikipedia/commons/thumb/1/1a/Tarot_de_Marseille_-_Le_Chariot_et_La_Justice.jpg/800px-Tarot_de_Marseille_-_Le_Chariot_et_La_Justice.jpg'); /* IMAGEN DE EJEMPLO */
            background-size: cover;
            background-position: center;
            position: relative;
        }
        .hero-background::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5); /* Overlay oscuro para que el texto sea legible */
            z-index: 0;
        }
    </style>
</head>
<body class="bg-purple-950 text-white">

    <header class="bg-purple-900/50 backdrop-blur-md shadow-lg py-2 px-6 fixed top-0 left-0 w-full z-50 transition-all duration-300">
        <nav class="container mx-auto flex justify-between items-center">
            <h1 class="text-xl font-bold playfair text-purple-400 flex items-center gap-2">
                <i class="fas fa-magic text-xl"></i>El Oráculo de Adriano
            </h1>
            <ul class="flex space-x-2 md:space-x-4 text-xs md:text-base">
                <li><a href="#about" class="hover:text-purple-400 transition duration-300">Sobre Mí</a></li>
                <li><a href="#services" class="hover:text-purple-400 transition duration-300">Servicios</a></li>
                <li><a href="#tarot-types" class="hover:text-purple-400 transition duration-300">Tipos de Tarot</a></li>
                <li><a href="#contact" class="hover:text-purple-400 transition duration-300">Contacto</a></li>
            </ul>
        </nav>
    </header>

    <main class="pt-20">
        <section class="relative h-[80vh] flex items-center justify-center text-center bg-cover bg-center hero-background">
            <div class="relative z-10 p-8 rounded-lg animate-fade-in-up">
                <h2 class="text-5xl md:text-7xl font-bold playfair text-white drop-shadow-lg text-glow">El Tarot de Adriano</h2>
                <p class="mt-4 text-xl md:text-2xl text-white max-w-2xl mx-auto drop-shadow-lg">
                    ¿Estás en un momento de incertidumbre? ¿Sientes que necesitas una guía para avanzar? El tarot no solo predice el futuro, sino que te ofrece un espejo para tu alma, revelando perspectivas y fortalezas que ya posees. Permite que sus símbolos te hablen y encuentren la claridad que buscas. Reserva tu sesión y empieza a transformar tu camino.
                </p>
                <a href="#contact" class="mt-8 inline-block px-8 py-4 bg-purple-400 text-purple-950 font-bold rounded-full hover:bg-purple-500 transition-transform transform hover:scale-105 shadow-xl">Agenda tu Lectura</a>
            </div>
        </section>

        <section id="about" class="py-20 px-6 bg-purple-950">
            <div class="container mx-auto flex flex-col md:flex-row items-center gap-12">
                <div class="md:w-1/2 flex justify-center animate-fade-in-left">
                </div>
                <div class="md:w-1/2 text-center md:text-left animate-fade-in-right">
                    <h3 class="text-4xl playfair font-bold text-purple-400 mb-6">Un Viaje de Conexión y Sabiduría</h3>
                    <p class="text-lg text-white mb-4">Con años de experiencia y una conexión profunda con el tarot, mi misión es ofrecerte un espacio seguro y lleno de luz para que encuentres las respuestas que buscas. Soy un **tarotista profesional con amplia trayectoria en la cartomancia**, y mi enfoque no es solo predecir el futuro, sino empoderarte para que tomes las riendas de tu vida.</p>
                    <p class="text-lg text-white mb-4">Gracias a mi formación en **coaching ontológico**, cada lectura es más que una simple tirada de cartas; es una conversación con tu yo interior, una herramienta para la autocomprensión y el crecimiento personal. Confía en la sabiduría de las cartas y en la intuición que te guiará hacia tu máximo potencial.</p>
                    <div class="mt-8 text-center md:text-left">
                        <p class="text-white mb-4">Descubre más sobre mi historia en el mundo del tarot.</p>
                        <a href="https://ejemplo.com/pagina-extra" class="inline-block px-6 py-3 bg-purple-400 text-purple-950 font-bold rounded-full hover:bg-purple-500 transition-transform transform hover:scale-105 shadow-xl">Conoce más</a>
                    </div>
                </div>
            </div>
        </section>

        <section id="services" class="py-20 px-6 bg-purple-900">
            <div class="container mx-auto text-center">
                <h3 class="text-4xl playfair font-bold text-purple-400 mb-12">Mis Servicios de Oráculos y Tarot</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="bg-purple-950 p-8 rounded-lg shadow-xl border border-purple-800 hover:border-purple-400 transition duration-300 transform hover:scale-105 animate-fade-in-up group">
                        <svg class="icon-svg mx-auto mb-4" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5A5.4 5.4 0 0 1 7.5 3c2.45 0 4.24 1.22 5.5 2.52C14.26 4.22 16.05 3 18.5 3a5.4 5.4 0 0 1 5.5 5.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                        </svg>
                        <h4 class="text-2xl font-semibold mb-4 text-white">Lectura de Amor</h4>
                        <p class="text-white">Explora las dinámicas de tus relaciones, encuentra la compatibilidad y abre tu corazón a nuevas posibilidades.</p>
                    </div>
                    <div class="bg-purple-950 p-8 rounded-lg shadow-xl border border-purple-800 hover:border-purple-400 transition duration-300 transform hover:scale-105 animate-fade-in-up delay-100 group">
                        <svg class="icon-svg mx-auto mb-4" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M20 6h-3V4c0-1.1-.9-2-2-2H9c-1.1 0-2 .9-2 2v2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zM9 4h6v2H9V4zM20 18H4V8h16v10zM14 12H10v4h4v-4z"/>
                        </svg>
                        <h4 class="text-2xl font-semibold mb-4 text-white">Lectura de Carrera</h4>
                        <p class="text-white">Obtén claridad en tu camino profesional, toma decisiones importantes y desbloquea tu potencial para el éxito.</p>
                    </div>
                    <div class="bg-purple-950 p-8 rounded-lg shadow-xl border border-purple-800 hover:border-purple-400 transition duration-300 transform hover:scale-105 animate-fade-in-up delay-200 group">
                        <svg class="icon-svg mx-auto mb-4" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25a.75.75 0 0 0-.75.75v12.5a.75.75 0 0 0 1.5 0V3a.75.75 0 0 0-.75-.75zM12 18.25a.75.75 0 0 0-.75.75v3a.75.75 0 0 0 1.5 0v-3a.75.75 0 0 0-.75-.75zM8.75 14a.75.75 0 0 0-.75.75v7.25a.75.75 0 0 0 1.5 0v-7.25a.75.75 0 0 0-.75-.75zM8.75 2.25a.75.75 0 0 0-.75.75v10.25a.75.75 0 0 0 1.5 0V3a.75.75 0 0 0-.75-.75zM15.25 10a.75.75 0 0 0-.75.75v11.25a.75.75 0 0 0 1.5 0V10.75a.75.75 0 0 0-.75-.75zM15.25 2.25a.75.75 0 0 0-.75.75v6a.75.75 0 0 0 1.5 0V3a.75.75 0 0 0-.75-.75z"/>
                        </svg>
                        <h4 class="text-2xl font-semibold mb-4 text-white">Lectura General</h4>
                        <p class="text-white">Una visión completa de tu vida, abordando preguntas sobre finanzas, familia, espiritualidad y, especialmente, tu **bienestar integral**. Exploraremos el **estado energético y emocional** de tu cuerpo, identificando bloqueos y patrones que te impiden sentirte en plenitud.</p>
                    </div>
                </div>
            </div>
        </section>


        <section id="contact" class="py-20 px-6 bg-purple-900">
            <div class="container mx-auto text-center">
                <h3 class="text-4xl playfair font-bold text-purple-400 mb-6">Agenda tu Lectura</h3>
                <p class="text-lg text-white mb-8">Estoy aquí para guiarte. Contáctame por WhatsApp o correo electrónico.</p>
                
                <div class="max-w-xl mx-auto flex flex-col md:flex-row gap-4">
                    <a href="https://wa.me/5492617116896?text=Hola,%20me%20gustaría%20agendar%20una%20lectura%20de%20tarot.%20Mi%20nombre%20es%20" class="flex-1 w-full inline-block px-4 py-3 bg-green-500 text-white font-bold rounded-lg hover:bg-green-600 transition duration-300 transform hover:scale-105">
                        <i class="fab fa-whatsapp mr-2"></i> Contactar por WhatsApp
                    </a>
                    <a href="mailto:adrianmblanes@gmail.com" class="flex-1 w-full inline-block px-4 py-3 bg-purple-500 text-white font-bold rounded-lg hover:bg-purple-600 transition duration-300 transform hover:scale-105">
                        <i class="fas fa-envelope mr-2"></i> Enviar un correo electrónico
                    </a>
                </div>
            </div>
        </section>

        <footer class="bg-purple-900 py-10 px-6 text-center">
            <div class="container mx-auto">
                <div class="flex justify-center space-x-6 text-2xl mb-4">
                    <a href="https://www.instagram.com/el.tarot.de.adriano?igsh=NTZob3NucTE4bWo4" class="text-white hover:text-purple-400 transition duration-300"><i class="fab fa-instagram"></i></a>
                    <a href="https://www.tiktok.com/@adrian.marcelo.79?_t=ZM-8zfaTjVfLxV&_r=1" class="text-white hover:text-purple-400 transition duration-300"><i class="fab fa-tiktok"></i></a>
                </div>
                <p class="text-white/70">&copy; 2025 El Oráculo de Adriano. Todos los derechos reservados.</p>
            </div>
        </footer>
    </main>
</body>
</html>
